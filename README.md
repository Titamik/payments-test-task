## Тестовое задание

### Задание: 
Необходимо создать административную панель, которая состоит из единого раздела “Выплаты”. 

### Описание: 
Раздел “Выплаты” должен быть представлен в виде таблицы с полями: 
- Логин
- Реквизиты (много текста)
- Сумма 
- Валюта 
- Статус заявки  

Поле “Статус заявки” должно содержать в себе переменную со значениями “Оплачен”/”Не оплачен”. По умолчанию каждой новой записи в таблице присваивается значение статуса “Не оплачен”, по клику на это поле через дроп-меню можно изменить значение статуса на “Оплачен”.   

Новые записи в таблице должны появляться через API-метод, через который будут приходить значения для соответствующих полей в таблице. API должно содержать базовую защиту по токену.

### Выполнение

https://payments-test-task.titamik.ru/payments
- titamik777@gmail.com
- 12345678
- 
#### 1. Структура
`App\Models\User` - стандартный пользователь Laravel
`App\Models\Payment` - модель Оплаты
`App\Models\Currency` - модель Валюты (HasMany `Payment`)

Валюта была вынесена в отделюную модель для большей масштабируемости приложения. 
В силу того, что по ТЗ необходимо вывести только оплаты, администрирование не предусмотрено.

`App\Enums\PaymentStatusEnum` - статусы Оплат

Статусы оплат сознательно вынесены в Enum, чтобы одновременно:
- Не нагружать приложение лишней 
моделью, а соответственно лишней таблицей, которая должна была бы JOINится, что на больших данных
экспоненциально влияло на скорость выполнения запроса.
- Дать возможность удобно управлять статусами из одного и валидировать запросы, 
чтобы в таблицы не попадал мусор
- Масштабируемость приложения - достаточто в этом Enum добавить новый статус, и он появится везде
в приложении, участвуя в дальнейшей бизнес-логике. При необходимости его можно сделать локализуемым
и переаодить на другие языки

`php artisan db:seed` - *В приложении написаны необходимые фабрики и сидеры для удобного тестирования*


#### 2. Административная часть

`App\Http\Controllers\PaymentController` - Основной контроллер, реализует методы для просмотра списка и редактирования оплат
`App\Http\Requests\PaymentUpdateRequest` - Валидация запроса на изменение оплаты (сама валидация чисто формальная)

#### 3. Api для создания оплат

`POST https://payments-test-task.titamik.ru/api/payments`

```
HEADERS {
        'Content-Type': 'application/json',
        'Authorization': 'Bearer 1|QMH2PDsBLMhyw2fM6ZaRnu6lmVJfHGLyRDml7hPRd8c0c5be'
    }
```

Для авторизации по токену используется `Laravel Sanctum`. Создание токена умышленно не вынесено в API, 
его может сгенерировать только администратор. Например, через tinker:
`User::find(1)->createToken('auth_token')->plainTextToken;`
